<script>

var majorWidth = 600;
var majorHeight = 500;
var mColors = d3.scaleOrdinal(d3.schemeBlues[6])
var majorChart = d3.select("body").append("svg")
.attr("width", majorWidth).attr("height", majorHeight);
var majorDetails = [
{ major: "Other", pct: 40 },
{ major: "Business/Marketing", pct: 26 },
{ major: "Engineering", pct: 14 },
{ major: "Health", pct: 7 },
{ major: "Visual/Performing Arts", pct: 7 },
{ major: "Psychology", pct: 6 }
]
var mData = d3.pie().value(function(e){ return e.pct })(majorDetails);
console.log('hello', mData);
var mSegments = d3.arc()
.innerRadius(0)
.outerRadius(200)
.padAngle(.05)
.padRadius(50);

var mSections = d3.select(".sjsu-majors").append("g").attr("transform", "translate(250, 250)")
.selectAll("path").data(mData);
mSections.enter().append("path").attr("d", mSegments).attr("fill",
function(e){
// console.log("string", mColors(e.data.pct));
return mColors(e.data.pct)})


var mContent = d3.select("g").selectAll("text").data(mData);
mContent.enter().append("text").each(function (e) {
var mCenter = mSegments.centroid(e);
d3.select(this).attr("x", mCenter[0]).attr("y", mCenter[1])
.text(`${e.data.pct}%`)
});

var mLegends = d3.select(".sjsu-majors").append("g").attr("transform", "translate(500, 100)")
.selectAll(".mLegends").data(mData);
var mLegend = mLegends.enter().append("g").classed("mLegends", true)
.attr("transform", function (e, i) { return "translate(0," + (i + 1) * 30 + ")"; });
mLegend.append("rect").attr("width", 20).attr("height", 20).attr("fill",
function (e) { return mColors(e.data.pct); });
mLegend.append("text").text(function (e) { return e.data.major; })
.attr("fill", function(e) { return mColors(e.data.pct) })
.attr("x", 30)
.attr("y", 20);

// var pieWidth = 600;
// var pieHeight = 500;
var colors = d3.scaleOrdinal(d3.schemeBlues[5])
// var pieChart = d3.select("body").append("svg")
// .attr("width", pieWidth).attr("height", pieHeight);
var details = [{race: "Asian", pct: 39},
{race: "Latino", pct: 32},
{race: "White", pct: 15},
{race: "Black/African American", pct: 4},
{race: "Other/Unknown/Mixed Race (Not Latino)", pct: 10}]
var data = d3.pie().value(function(d){return d.pct})(details);
console.log(data);
var segments = d3.arc()
.innerRadius(0)
.outerRadius(200)
.padAngle(.05)
.padRadius(50);

var sections = d3.select(".sjsu-pie-chart").append("g").attr("transform", "translate(250, 250)")
.selectAll("path").data(data);
sections.enter().append("path").attr("d", segments).attr("fill",
function(d){return colors(d.data.pct)})

var content = d3.select("g").selectAll("text").data(data);
content.enter().append("text").each(function(d){
var center = segments.centroid(d);
d3.select(this).attr("x", center[0]).attr("y", center[1])
.text(`${d.data.pct}%`)
});

var legends = d3.select(".sjsu-pie-chart").append("g").attr("transform", "translate(500, 100)")
.selectAll(".legends").data(data);
var legend = legends.enter().append("g").classed("legends", true)
.attr("transform", function(d, i){return "translate(0," + (i+1)*30 + ")";});
legend.append("rect").attr("width", 20).attr("height", 20).attr("fill",
function(d){return colors(d.data.pct);});
legend.append("text").text(function(d){return d.data.race;})
.attr("fill", function(d){return colors(d.data.pct)})
.attr("x", 30)
.attr("y", 20);


var pieWidth = 600;
var pieHeight = 500;
var colors = d3.scaleOrdinal(d3.schemeBlues[5])
var pieChart = d3.select("body").append("svg")
.attr("width", pieWidth).attr("height", pieHeight);
var details = [{ race: "Asian", pct: 41 },
{ race: "Latino", pct: 18 },
{ race: "White", pct: 28 },
{ race: "Black/African American", pct: 2 },
{ race: "Other/Unknown/Mixed Race (Not Latino)", pct: 12 }]
var data = d3.pie().value(function (d) { return d.pct })(details);
console.log(data);
var segments = d3.arc()
.innerRadius(0)
.outerRadius(200)
.padAngle(.05)
.padRadius(50);

var sections = d3.select(".ucb-pie-chart").append("g").attr("transform", "translate(250, 250)")
.selectAll("path").data(data);
sections.enter().append("path").attr("d", segments).attr("fill",
function (d) { return colors(d.data.pct) })

var content = d3.select("g").selectAll("text").data(data);
content.enter().append("text").each(function (d) {
var center = segments.centroid(d);
d3.select(this).attr("x", center[0]).attr("y", center[1])
.text(`${d.data.pct}%`)
});

var legends = d3.select(".ucb-pie-chart").append("g").attr("transform", "translate(500, 100)")
.selectAll(".legends").data(data);
var legend = legends.enter().append("g").classed("legends", true)
.attr("transform", function (d, i) { return "translate(0," + (i + 1) * 30 + ")"; });
legend.append("rect").attr("width", 20).attr("height", 20).attr("fill",
function (d) { return colors(d.data.pct); });
legend.append("text").text(function (d) { return d.data.race; })
.attr("fill", function (d) { return colors(d.data.pct) })
.attr("x", 30)
.attr("y", 20);

</script>